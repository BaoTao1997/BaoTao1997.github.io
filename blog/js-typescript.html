<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript 在Vue项目中的使用总结 | BaoTao的前端日志</title>
    <meta name="description" content="欢迎访问我的前端日志">
    <link rel="icon" href="/hero.png">
    
    <link rel="preload" href="/assets/css/0.styles.1a992bd3.css" as="style"><link rel="preload" href="/assets/js/app.f225858c.js" as="script"><link rel="preload" href="/assets/js/2.672550d7.js" as="script"><link rel="preload" href="/assets/js/32.bfb29c32.js" as="script"><link rel="prefetch" href="/assets/js/10.c2729db0.js"><link rel="prefetch" href="/assets/js/11.6652c16a.js"><link rel="prefetch" href="/assets/js/12.c99151b5.js"><link rel="prefetch" href="/assets/js/13.c20a05a6.js"><link rel="prefetch" href="/assets/js/14.1ef90bc5.js"><link rel="prefetch" href="/assets/js/15.48e33afe.js"><link rel="prefetch" href="/assets/js/16.9480cdd8.js"><link rel="prefetch" href="/assets/js/17.2dbe7a92.js"><link rel="prefetch" href="/assets/js/18.d2ff3f51.js"><link rel="prefetch" href="/assets/js/19.bad3ad9a.js"><link rel="prefetch" href="/assets/js/20.f54ae634.js"><link rel="prefetch" href="/assets/js/21.fad4d162.js"><link rel="prefetch" href="/assets/js/22.8ce49b77.js"><link rel="prefetch" href="/assets/js/23.191fcec1.js"><link rel="prefetch" href="/assets/js/24.5d911dd7.js"><link rel="prefetch" href="/assets/js/25.92e6ee1b.js"><link rel="prefetch" href="/assets/js/26.2e6ac599.js"><link rel="prefetch" href="/assets/js/27.771ef2ee.js"><link rel="prefetch" href="/assets/js/28.9ddf0721.js"><link rel="prefetch" href="/assets/js/29.3deeede2.js"><link rel="prefetch" href="/assets/js/3.5f2ab74c.js"><link rel="prefetch" href="/assets/js/30.fe8bff52.js"><link rel="prefetch" href="/assets/js/31.1858abcd.js"><link rel="prefetch" href="/assets/js/33.a2ae8076.js"><link rel="prefetch" href="/assets/js/34.531e6b81.js"><link rel="prefetch" href="/assets/js/35.645bc314.js"><link rel="prefetch" href="/assets/js/36.56d7c6c2.js"><link rel="prefetch" href="/assets/js/37.6ea9bf2e.js"><link rel="prefetch" href="/assets/js/38.2c569e14.js"><link rel="prefetch" href="/assets/js/39.0fbb6fc9.js"><link rel="prefetch" href="/assets/js/4.43a614f9.js"><link rel="prefetch" href="/assets/js/40.a2e40f8e.js"><link rel="prefetch" href="/assets/js/41.8de6a957.js"><link rel="prefetch" href="/assets/js/42.f34c83ed.js"><link rel="prefetch" href="/assets/js/43.5124ce0a.js"><link rel="prefetch" href="/assets/js/44.5148b76a.js"><link rel="prefetch" href="/assets/js/45.0482d6c2.js"><link rel="prefetch" href="/assets/js/46.dca6e042.js"><link rel="prefetch" href="/assets/js/47.d3d60350.js"><link rel="prefetch" href="/assets/js/48.c5d4232b.js"><link rel="prefetch" href="/assets/js/49.23efdb3a.js"><link rel="prefetch" href="/assets/js/5.c06abc86.js"><link rel="prefetch" href="/assets/js/50.143a9543.js"><link rel="prefetch" href="/assets/js/51.67b5b689.js"><link rel="prefetch" href="/assets/js/52.0a3fb16a.js"><link rel="prefetch" href="/assets/js/6.13d9ab35.js"><link rel="prefetch" href="/assets/js/7.d11a37f8.js"><link rel="prefetch" href="/assets/js/8.69f4770c.js"><link rel="prefetch" href="/assets/js/9.3a968c29.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1a992bd3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">BaoTao的前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试题</a></div><div class="nav-item"><a href="/book/" class="nav-link">阅读</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><div class="nav-item"><a href="/resume/" class="nav-link">简历</a></div> <a href="https://github.com/BaoTao1997" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试题</a></div><div class="nav-item"><a href="/book/" class="nav-link">阅读</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><div class="nav-item"><a href="/resume/" class="nav-link">简历</a></div> <a href="https://github.com/BaoTao1997" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端工程化与设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/engineering-optimize.html" class="sidebar-link">web性能优化</a></li><li><a href="/blog/pattern-pub_sub.html" class="sidebar-link">订阅发布模式和EventEmitter</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/framework-mvvm.html" class="sidebar-link">动手实现一个简单的MVVM</a></li><li><a href="/blog/framework-vue_curd.html" class="sidebar-link">Vue的增删改查</a></li><li><a href="/blog/framework-vue-lazyload.html" class="sidebar-link">从Vue-lazyload看图片懒加载</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>网络协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/osi-tcp.html" class="sidebar-link">TCP连接</a></li><li><a href="/blog/osi-status_code.html" class="sidebar-link">HTTP状态码解析</a></li><li><a href="/blog/osi-http_header.html" class="sidebar-link">HTTP报文解析</a></li><li><a href="/blog/osi-safety.html" class="sidebar-link">Web安全</a></li><li><a href="/blog/osi-login.html" class="sidebar-link">Web登录鉴权</a></li><li><a href="/blog/osi-cache.html" class="sidebar-link">浏览器缓存策略</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/data-structure-sort.html" class="sidebar-link">排序算法</a></li><li><a href="/blog/data-structure-binarytree.html" class="sidebar-link">二叉树</a></li><li><a href="/blog/data-structure-linkList.html" class="sidebar-link">链表</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css-repaint.html" class="sidebar-link">CSS的repaint和reflow</a></li><li><a href="/blog/css-self-adaption.html" class="sidebar-link">CSS自适应</a></li><li><a href="/blog/css-tips.html" class="sidebar-link">CSS技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js-regex.html" class="sidebar-link">正则表达式</a></li><li><a href="/blog/js-prototype.html" class="sidebar-link">JS原型链与原型</a></li><li><a href="/blog/js-promise.html" class="sidebar-link">手写符合Promise/A+的Promise</a></li><li><a href="/blog/js-eventloop.html" class="sidebar-link">JS事件循环</a></li><li><a href="/blog/js-typescript.html" class="active sidebar-link">TypeScript 在Vue项目中的使用总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#typescript-在vue项目中的使用总结" class="sidebar-link">TypeScript 在Vue项目中的使用总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_1-基本类型合集" class="sidebar-link">1. 基本类型合集</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_2-特殊类型" class="sidebar-link">2. 特殊类型</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_3-类型断言" class="sidebar-link">3. 类型断言</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_4-泛型：-generics" class="sidebar-link">4. 泛型： Generics</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_5-自定义类型：-interface-（接口）vs-typealias（类型别名）" class="sidebar-link">5. 自定义类型： Interface （接口）vs Typealias（类型别名）</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_6-实现与继承：-implementsvs-extends" class="sidebar-link">6.实现与继承： implementsvs extends</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_7-声明文件与命名空间：-declare-和-namespace" class="sidebar-link">7.声明文件与命名空间： declare 和 namespace</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_8-访问修饰符：-private、-public、-protected" class="sidebar-link">8. 访问修饰符： private、 public、 protected</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#_9-vue中的使用方式" class="sidebar-link">9.Vue中的使用方式</a></li><li class="sidebar-sub-header"><a href="/blog/js-typescript.html#参考" class="sidebar-link">参考</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>运维与多人协作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/operation-git.html" class="sidebar-link">Git常规操作与Linux命令</a></li><li><a href="/blog/operation-blog.html" class="sidebar-link">搭建持续集成的个人博客</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="typescript-在vue项目中的使用总结"><a href="#typescript-在vue项目中的使用总结" aria-hidden="true" class="header-anchor">#</a> TypeScript 在Vue项目中的使用总结</h2> <p>新的 <code>VueCLI</code>工具允许开发者 使用 <code>TypeScript</code> 集成环境 创建新项目。只需运行 <code>vue createmy-app</code>。然后，命令行会要求选择预设。使用箭头键选择 <code>Manuallyselectfeatures</code>。接下来，只需确保选择了 <code>TypeScript</code>和 <code>Babel</code>选项。</p> <p>目录会多出两个文件：</p> <ul><li><code>shims-tsx.d.ts</code>，允许你以 <code>.tsx</code>结尾的文件，在 <code>Vue</code>项目中编写 <code>jsx</code>代码</li> <li><code>shims-vue.d.ts</code> 主要用于 <code>TypeScript</code> 识别 <code>.vue</code> 文件， <code>Ts</code>默认并不支持导入 <code>vue</code> 文件，这个文件告诉 <code>ts</code>导入 <code>.vue</code> 文件都按 <code>VueConstructor&lt;Vue&gt;</code>处理。</li></ul> <p>重点还是讲讲 <code>TypeScript</code>和 <code>vue-property-decorator</code></p> <p><code>Typescript</code>与 <code>Javascript</code>共享相同的基本类型，但有一些额外的类型。</p> <ul><li>元组 <code>Tuple</code></li> <li>枚举 <code>enum</code></li> <li><code>Any</code> 与 <code>Void</code></li></ul> <h3 id="_1-基本类型合集"><a href="#_1-基本类型合集" aria-hidden="true" class="header-anchor">#</a> 1. 基本类型合集</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 数字，二、八、十六进制都支持</span>
<span class="token keyword">let</span> decLiteral<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> hexLiteral<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0xf00d</span><span class="token punctuation">;</span>
<span class="token comment">// 字符串，单双引都行</span>
<span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;bob&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sentence<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token template-string"><span class="token string">`Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> name <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span>
<span class="token comment">// 数组，第二种方式是使用数组泛型，Array&lt;元素类型&gt;</span>
<span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> u<span class="token punctuation">:</span> undefined <span class="token operator">=</span> undefined<span class="token punctuation">;</span>
<span class="token keyword">let</span> n<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2-特殊类型"><a href="#_2-特殊类型" aria-hidden="true" class="header-anchor">#</a> 2. 特殊类型</h3> <h5 id="_1-元组-tuple"><a href="#_1-元组-tuple" aria-hidden="true" class="header-anchor">#</a> 1. <strong>元组 Tuple</strong></h5> <p>想象 元组 作为有组织的数组，你需要以正确的顺序预定义数据类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> messyArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">' something'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> undefined<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tuple<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">&quot;Indrek&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;Lasn&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果不遵循 为元组 预设排序的索引规则，那么 <code>Typescript</code>会警告。</p> <h5 id="_2-枚举-enum"><a href="#_2-枚举-enum" aria-hidden="true" class="header-anchor">#</a> 2. 枚举 <code>enum</code></h5> <p><code>enum</code>类型是对JavaScript标准数据类型的一个补充。 像C#等其它语言一样，使用枚举类型可以为一组数值赋予友好的名字。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 默认情况从0开始为元素编号，也可手动为1开始</span>
<span class="token keyword">enum</span> Color <span class="token punctuation">{</span>Red <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Green <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> Blue <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> c<span class="token punctuation">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">;</span>  <span class="token comment">// c输出为1</span>

<span class="token keyword">let</span> colorName<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> Color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colorName<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出'Green'因为上面代码里它的值是2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_3-void"><a href="#_3-void" aria-hidden="true" class="header-anchor">#</a> 3. <code>Void</code></h5> <p>在 <code>Typescript</code>中，<strong>你必须在函数中定义返回类型</strong>。我们可以将返回值定义为<code>Void</code>，此时将无法<code>return</code></p> <h5 id="_4-any"><a href="#_4-any" aria-hidden="true" class="header-anchor">#</a> 4. <code>Any</code></h5> <p>当你无法确认在处理什么类型时可以用这个，接受所有类型，尽量少用。</p> <h5 id="_5-never"><a href="#_5-never" aria-hidden="true" class="header-anchor">#</a> 5. <code>Never</code></h5> <p>never类型表示的是那些永不存在的值的类型，用于总是会抛出异常或根本就不会有返回值的函数表达式。</p> <p>具体的行为是：</p> <ul><li><code>thrownewError(message)</code></li> <li><code>returnerror(&quot;Something failed&quot;)</code></li> <li><code>while(true){}// 存在无法达到的终点</code></li></ul> <h3 id="_3-类型断言"><a href="#_3-类型断言" aria-hidden="true" class="header-anchor">#</a> 3. 类型断言</h3> <p>可以用来手动指定一个值的类型。</p> <p>有两种写法，尖括号和 <code>as</code>:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> someValue<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token string">&quot;this is a string&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> strLength<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>someValue<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">let</span> strLength<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>someValue <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用例子有：</p> <p>当 TypeScript 不确定一个联合类型的变量到底是哪个类型的时候，我们只能访问此联合类型的所有类型里共有的属性或方法：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token parameter">something<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>    
	<span class="token keyword">return</span> something<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// index.ts(2,22): error TS2339: Property 'length' does not exist on type 'string | number'.//   Property 'length' does not exist on type 'number'.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果你访问长度将会报错，因为如果变量是数字则没有<code>length</code>这个属性，有时候我们确实需要在还不确定类型的时候就访问其中一个类型的属性或方法，此时需要断言才不会报错，操作如下：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token parameter">something<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>something<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>something<span class="token punctuation">)</span><span class="token punctuation">.</span>length
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> something<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>安全导航操作符 ( ?. )和非空断言操作符（!.）</strong></p> <p><strong>安全导航操作符 ( ?. ) 和空属性路径：</strong> 为了解决导航时变量值为null时，页面运行时出错的问题。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>The null hero's name is {{nullHero?.name}}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>非空断言操作符：</strong></p> <p>能确定变量值一定不为空时使用。</p> <p>与安全导航操作符不同的是，非空断言操作符不会防止出现 null 或 undefined。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let s = e!.name;  // 断言e是非空并访问name属性
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-泛型：-generics"><a href="#_4-泛型：-generics" aria-hidden="true" class="header-anchor">#</a> 4. 泛型： <code>Generics</code></h3> <p>支持现有的数据类型和将来添加的数据类型的组件为大型软件系统的开发过程提供很好的灵活性。可以使用&quot;泛型&quot;来创建可复用的组件，并且组件可支持多种数据类型。便可以让用户根据自己的数据类型来使用组件。</p> <h5 id="_1-泛型方法"><a href="#_1-泛型方法" aria-hidden="true" class="header-anchor">#</a> 1. 泛型方法</h5> <p>在TypeScript里，<strong>声明泛型方法</strong>有以下两种方式：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> gen_func1<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 或者</span>
<span class="token keyword">let</span> gen_func2<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">arg<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">T</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>调用方式</strong>也有两种：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 可以看到通过泛型我将string类型传入保证函数的返回值和函数形参都是string类型</span>
gen_func1<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">gen_func2</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 第二种调用方式可省略类型参数，因为编译器会根据传入参数来自动识别对应的类型。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_2-泛型与-any"><a href="#_2-泛型与-any" aria-hidden="true" class="header-anchor">#</a> 2. 泛型与 <code>Any</code></h5> <p><code>Ts</code> 的特殊类型 <code>Any</code> 在具体使用时，可以代替任意类型，咋一看两者好像没啥区别，其实不然：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 方法一：带有any参数的方法</span>
<span class="token keyword">function</span> <span class="token function">any_func</span><span class="token punctuation">(</span><span class="token parameter">arg<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>    
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 方法二：Array泛型方法</span>
<span class="token keyword">function</span> array_func<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>      
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>方法一，打印了 <code>arg</code>参数的 <code>length</code>属性。因为 <code>any</code>可以代替任意类型，所以该方法在传入参数不是数组或者带有 <code>length</code>属性对象时，会抛出异常。</li> <li>方法二，定义了参数类型是 <code>Array</code>的泛型类型，肯定会有 <code>length</code>属性，所以不会抛出异常。</li></ul> <h5 id="_3-泛型类型"><a href="#_3-泛型类型" aria-hidden="true" class="header-anchor">#</a> 3. 泛型类型</h5> <p>泛型接口：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Generics_interface</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>    
    <span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> func_demo<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>    
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> func1<span class="token punctuation">:</span> Generics_interface<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> func_demo<span class="token punctuation">;</span>
<span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 正确类型的实际参数</span>
<span class="token function">func1</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 错误类型的实际参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_5-自定义类型：-interface-（接口）vs-typealias（类型别名）"><a href="#_5-自定义类型：-interface-（接口）vs-typealias（类型别名）" aria-hidden="true" class="header-anchor">#</a> 5. 自定义类型： <code>Interface</code> （接口）vs <code>Typealias</code>（类型别名）</h3> <h5 id="_1-相同点"><a href="#_1-相同点" aria-hidden="true" class="header-anchor">#</a> 1. 相同点</h5> <p><strong>都可以用来描述一个对象或函数：</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>  
    name<span class="token punctuation">:</span> <span class="token builtin">string</span>  age<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>  
    name<span class="token punctuation">:</span> <span class="token builtin">string</span>  age<span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">SetUser</span> <span class="token punctuation">{</span>  
    <span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> SetUser <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>都允许拓展（extends）：</strong></p> <p><code>interface</code> 和 <code>type</code> 都可以拓展，并且两者并不是相互独立的，也就是说 <code>interface</code>可以 <code>extends type</code>, <code>type</code> 也可以 <code>extends interface</code> 。 <strong>虽然效果差不多，但是两者语法不同</strong>。</p> <p><strong>interface extends interface</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>
	age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>type extends type</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> Name <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">type</span> User <span class="token operator">=</span> Name <span class="token operator">&amp;</span> <span class="token punctuation">{</span> age<span class="token punctuation">:</span> <span class="token builtin">number</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>interface extends type</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> Name <span class="token operator">=</span> <span class="token punctuation">{</span>   
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>   
    age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>type extends interface</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Name</span> <span class="token punctuation">{</span>   
	name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">type</span> User <span class="token operator">=</span> Name <span class="token operator">&amp;</span> <span class="token punctuation">{</span> age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_2-不同点"><a href="#_2-不同点" aria-hidden="true" class="header-anchor">#</a> 2. 不同点</h5> <p><strong>type 可以而 interface 不行</strong></p> <ul><li><code>type</code> 可以声明基本类型别名，联合类型，元组等类型</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 基本类型别名</span>
<span class="token keyword">type</span> Name <span class="token operator">=</span> <span class="token builtin">string</span>
<span class="token comment">// 联合类型</span>
<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>    
    <span class="token function">wong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>    
    <span class="token function">miao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Pet <span class="token operator">=</span> Dog <span class="token operator">|</span> Cat

<span class="token comment">// 具体定义数组每个位置的类型</span>
<span class="token keyword">type</span> PetList <span class="token operator">=</span> <span class="token punctuation">[</span>Dog<span class="token punctuation">,</span> Pet<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><code>type</code> 语句中还可以使用 <code>typeof</code>获取实例的 类型进行赋值</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 当你想获取一个变量的类型时，使用 typeof</span>
<span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> div<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>其他骚操作</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> StringOrNumber <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  
<span class="token keyword">type</span> Text <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  
<span class="token keyword">type</span> NameLookup <span class="token operator">=</span> Dictionary<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Person<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token keyword">type</span> Callback<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  
<span class="token keyword">type</span> Pair<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  
<span class="token keyword">type</span> Coordinates <span class="token operator">=</span> Pair<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  
<span class="token keyword">type</span> Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>interface可以而 type不行</strong></p> <p><code>interface</code> 能够声明合并</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token builtin">string</span>  age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>  sex<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span>
<span class="token comment">/*User 接口为 {  name: string  age: number  sex: string }*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>interface</code> 有可选属性和只读属性</p> <ul><li><p>可选属性</p> <p>接口里的属性不全都是必需的。 有些是只在某些条件下存在，或者根本不存在。 例如给函数传入的参数对象中只有部分属性赋值了。带有可选属性的接口与普通的接口定义差不多，只是在可选属性名字定义的后面加一个 <code>?</code>符号。如下所示</p></li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>  
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  
    age<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  
    gender<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>只读属性</p> <p>顾名思义就是这个属性是不可写的，对象属性只能在对象刚刚创建的时候修改其值。 你可以在属性名前用 <code>readonly</code>来指定只读属性，如下所示：</p></li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    
    <span class="token keyword">readonly</span> loginName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>    
    password<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面的例子说明，当完成User对象的初始化后loginName就不可以修改了。</p> <h3 id="_6-实现与继承：-implementsvs-extends"><a href="#_6-实现与继承：-implementsvs-extends" aria-hidden="true" class="header-anchor">#</a> 6.实现与继承： <code>implements</code>vs <code>extends</code></h3> <p><code>extends</code>很明显就是ES6里面的类继承，<code>implement</code>则与C#或Java里接口的基本作用一样， <code>TypeScript</code>也能够用它来明确的强制一个类去符合某种契约。</p> <p><strong>implement基本用法</strong>：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IDeveloper</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// OK</span>
<span class="token keyword">class</span> <span class="token class-name">dev</span> <span class="token keyword">implements</span> <span class="token class-name">IDeveloper</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">'Test'</span><span class="token punctuation">;</span>
    age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// OK</span>
<span class="token keyword">class</span> <span class="token class-name">dev2</span> <span class="token keyword">implements</span> <span class="token class-name">IDeveloper</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">'Test'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Error</span>
<span class="token keyword">class</span> <span class="token class-name">dev3</span> <span class="token keyword">implements</span> <span class="token class-name">IDeveloper</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">'Test'</span><span class="token punctuation">;</span>
    age <span class="token operator">=</span> <span class="token string">'9'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>而 <code>extends</code>是继承父类，两者其实可以混着用：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">B</span> <span class="token keyword">implements</span> <span class="token class-name">C</span><span class="token punctuation">,</span><span class="token constant">D</span><span class="token punctuation">,</span><span class="token constant">E</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>搭配 <code>interface</code>和 <code>type</code>的用法有：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Perimeter <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">perimiter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">implements</span> <span class="token class-name">PoinType</span><span class="token punctuation">,</span> Shape<span class="token punctuation">,</span> Perimeter <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">perimiter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_7-声明文件与命名空间：-declare-和-namespace"><a href="#_7-声明文件与命名空间：-declare-和-namespace" aria-hidden="true" class="header-anchor">#</a> 7.声明文件与命名空间： <code>declare</code> 和 <code>namespace</code></h3> <p>Vue项目中的 <code>shims-tsx.d.ts</code>和 <code>shims-vue.d.ts</code>，其初始内容是这样的：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// shims-tsx.d.tsimport Vue, { VNode } from 'vue';</span>
<span class="token keyword">declare</span> global <span class="token punctuation">{</span>  
    <span class="token keyword">namespace</span> <span class="token constant">JSX</span> <span class="token punctuation">{</span>    
        <span class="token comment">// tslint:disable no-empty-interface    </span>
        <span class="token keyword">interface</span> <span class="token class-name">Element</span> <span class="token keyword">extends</span> <span class="token class-name">VNode</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    
        <span class="token comment">// tslint:disable no-empty-interface    </span>
        <span class="token keyword">interface</span> <span class="token class-name">ElementClass</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    
        <span class="token keyword">interface</span> <span class="token class-name">IntrinsicElements</span> <span class="token punctuation">{</span>      
            <span class="token punctuation">[</span>elem<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>    
        <span class="token punctuation">}</span>  
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// shims-vue.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.vue'</span> <span class="token punctuation">{</span>  
    <span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>  
    <span class="token keyword">export</span> <span class="token keyword">default</span> Vue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>declare</code>：当使用第三方库时，我们需要引用它的声明文件，才能获得对应的代码补全、接口提示等功能。</p> <p>这里列举出几个常用的：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">var</span> 声明全局变量
<span class="token keyword">declare</span> <span class="token keyword">function</span> 声明全局方法
<span class="token keyword">declare</span> <span class="token keyword">class</span> 声明全局类
<span class="token keyword">declare</span> <span class="token keyword">enum</span> 声明全局枚举类型
<span class="token keyword">declare</span> global 扩展全局变量
<span class="token keyword">declare</span> <span class="token keyword">module</span> 扩展模块
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>namespace</code>：“内部模块”现在称做“命名空间”</p> <p><code>module X {</code> 相当于现在推荐的写法 <code>namespace X {</code>)</p> <p>类似模块，同样也可以通过为其他 JS 库使用了命名空间的库创建 <code>.d.ts</code> 文件的声明文件，如为 <code>D3</code> JS 库，可以创建这样的声明文件：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">namespace</span> <span class="token constant">D3</span><span class="token punctuation">{</span>    
    <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Selectors</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">declare</span> <span class="token keyword">var</span> d3<span class="token punctuation">:</span> <span class="token constant">D3</span><span class="token punctuation">.</span>Base<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>所以上述两个文件：</p> <ul><li><code>shims-tsx.d.ts</code>， 在全局变量 <code>global</code>中批量命名了数个内部模块。</li> <li><code>shims-vue.d.ts</code>，意思是告诉 <code>TypeScript</code> <code>*.vue</code> 后缀的文件可以交给 <code>vue</code> 模块来处理。</li></ul> <h3 id="_8-访问修饰符：-private、-public、-protected"><a href="#_8-访问修饰符：-private、-public、-protected" aria-hidden="true" class="header-anchor">#</a> 8. 访问修饰符： <code>private</code>、 <code>public</code>、 <code>protected</code></h3> <p>其实很好理解：</p> <ol><li>默认为 <code>public</code></li> <li>当成员被标记为 <code>private</code>时，它就不能在声明它的类的外部访问，比如：</li></ol> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>　　
	<span class="token keyword">private</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
　　 <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">theName<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>　　　　
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>　　
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">//错误，‘name’是私有的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>protected</code>和 <code>private</code>类似，但是， <code>protected</code>成员在派生类中可以访问</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>　　
    <span class="token keyword">protected</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">theName<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>　　　　
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>　　
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Rhino</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>    
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">'Rhino'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token punctuation">}</span>            
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//此处的name就是Animal类中的name   </span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_9-vue中的使用方式"><a href="#_9-vue中的使用方式" aria-hidden="true" class="header-anchor">#</a> 9.Vue中的使用方式</h3> <p>官网推荐有<a href="https://cn.vuejs.org/v2/guide/typescript.html" target="_blank" rel="noopener noreferrer">两种<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，其中<code>Vue.extend</code>或者<code>Vue.component</code>，需要与 <code>mixins</code> 结合使用。在 <code>mixin</code>中定义的方法，不会被 typescript 识别到，这就意味着会出现**丢失代码提示、类型检查、编译报错等问题。**其实还是采用 <a href="https://github.com/vuejs/vue-class-component" target="_blank" rel="noopener noreferrer">vue-class-component<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 装饰器写法会更好：</p> <p>“@”修饰函数倒不如说是引用、调用它修饰的函数。</p> <p>举个栗子，下面的一段代码，里面两个函数，没有被调用，也会有输出结果：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;before ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;after ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
@test
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    
	<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;func was called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>直接运行，输出结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>before ...
func was called
after ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面代码可以看出来:</p> <ul><li>只定义了两个函数： <code>test</code>和 <code>func</code>，没有调用它们。</li> <li>如果没有“@test”，运行应该是没有任何输出的。</li></ul> <p>但是，解释器读到函数修饰符“@”的时候，后面步骤会是这样：</p> <ol><li>去调用 <code>test</code>函数， <code>test</code>函数的入口参数就是那个叫“ <code>func</code>”的函数；</li> <li><code>test</code>函数被执行，入口参数的（也就是 <code>func</code>函数）会被调用（执行）；</li></ol> <p>换言之，修饰符带的那个函数的入口参数，就是下面的那个整个的函数。</p> <h5 id="利用-vue-property-decorator和-vuex-class提供的装饰器"><a href="#利用-vue-property-decorator和-vuex-class提供的装饰器" aria-hidden="true" class="header-anchor">#</a> 利用 <code>vue-property-decorator</code>和 <code>vuex-class</code>提供的装饰器</h5> <p><code>vue-property-decorator</code>的装饰器：</p> <ul><li><code>@Prop</code></li> <li><code>@PropSync</code></li> <li><code>@Provide</code></li> <li><code>@Model</code></li> <li><code>@Watch</code></li> <li><code>@Inject</code></li> <li><code>@Provide</code></li> <li><code>@Emit</code></li> <li><code>@Component</code> (<strong>provided by</strong> vue-class-component)</li> <li><code>Mixins</code> (the helper function named <code>mixins</code> <strong>provided by</strong> vue-class-component)</li></ul> <p><code>vuex-class</code>的装饰器：</p> <ul><li>@State</li> <li>@Getter</li> <li>@Action</li> <li>@Mutation</li></ul> <p>我们拿原始Vue组件模版来看：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>componentA<span class="token punctuation">,</span>componentB<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/components'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    
	components<span class="token punctuation">:</span> <span class="token punctuation">{</span> componentA<span class="token punctuation">,</span> componentB<span class="token punctuation">}</span><span class="token punctuation">,</span>    		
	props<span class="token punctuation">:</span> <span class="token punctuation">{</span>    
		propA<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token keyword">type</span><span class="token punctuation">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">,</span>    
		propB<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'default value'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    		
		propC<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Boolean<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 组件数据  </span>
	<span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
        <span class="token keyword">return</span> <span class="token punctuation">{</span>      
        message<span class="token punctuation">:</span> <span class="token string">'Hello'</span>    
        <span class="token punctuation">}</span>  
	<span class="token punctuation">}</span><span class="token punctuation">,</span>  
	<span class="token comment">// 计算属性  </span>
	computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>    
        <span class="token function">reversedMessage</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    
        <span class="token punctuation">}</span>    
        <span class="token comment">// Vuex数据    </span>
        <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count    
        <span class="token punctuation">}</span>  
	<span class="token punctuation">}</span><span class="token punctuation">,</span>  
	methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>    
        <span class="token function">changeMessage</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      
        	<span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;Good bye&quot;</span>    
        <span class="token punctuation">}</span><span class="token punctuation">,</span>    
        <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
        	<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">[</span><span class="token string">'person/name'</span><span class="token punctuation">]</span>        
        	<span class="token keyword">return</span> name    
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span>  
	<span class="token comment">// 生命周期  </span>
	<span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  
	<span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  
	<span class="token function">updated</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  
	<span class="token function">destroyed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>以上模版替换成修饰符写法则是：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Prop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> State<span class="token punctuation">,</span> Getter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex-class'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/person'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> componentA<span class="token punctuation">,</span> componentB <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/components'</span><span class="token punctuation">;</span>
@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    
	components<span class="token punctuation">:</span><span class="token punctuation">{</span> componentA<span class="token punctuation">,</span> componentB<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span><span class="token punctuation">{</span>    
	@<span class="token function">Prop</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span> <span class="token keyword">readonly</span> propA<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> undefined  
	@<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'default value'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">readonly</span> propB<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token builtin">string</span>  
	@<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">[</span>String<span class="token punctuation">,</span> Boolean<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">readonly</span> propC<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> undefined
  	<span class="token comment">// 原data  </span>
  	message <span class="token operator">=</span> <span class="token string">'Hello'</span>
  	<span class="token comment">// 计算属性    </span>
  	<span class="token keyword">private</span> <span class="token keyword">get</span> <span class="token function">reversedMessage</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>      
  		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>  
  	<span class="token punctuation">}</span>  
  	<span class="token comment">// Vuex 数据  </span>
  	@<span class="token function">State</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">:</span> IRootState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state <span class="token punctuation">.</span> booking<span class="token punctuation">.</span> currentStep<span class="token punctuation">)</span> step<span class="token operator">!</span><span class="token punctuation">:</span> <span class="token builtin">number</span>    		@<span class="token function">Getter</span><span class="token punctuation">(</span> <span class="token string">'person/name'</span><span class="token punctuation">)</span> name<span class="token operator">!</span><span class="token punctuation">:</span> name
  	<span class="token comment">// method  </span>
  	<span class="token keyword">public</span> <span class="token function">changeMessage</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">'Good bye'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  
  	<span class="token keyword">public</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> storeName <span class="token operator">=</span> name<span class="token punctuation">;</span>   <span class="token keyword">return</span> storeName  <span class="token punctuation">}</span>    
  	<span class="token comment">// 生命周期  </span>
  	<span class="token keyword">private</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>：<span class="token keyword">void</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  
  	<span class="token keyword">private</span> <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>：<span class="token keyword">void</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  
  	<span class="token keyword">private</span> <span class="token function">updated</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>：<span class="token keyword">void</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  
  	<span class="token keyword">private</span> <span class="token function">destroyed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>：<span class="token keyword">void</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>正如你所看到的，我们在生命周期 列表那都添加 <code>private XXXX</code>方法，因为这不应该公开给其他组件。</p> <p>而不对 <code>method</code>做私有约束的原因是，可能会用到 <code>@Emit</code>来向父组件传递信息。</p> <h5 id="添加全局工具多语言i18n"><a href="#添加全局工具多语言i18n" aria-hidden="true" class="header-anchor">#</a> 添加全局工具多语言i18n</h5> <p>引入全局模块，需要改 <code>main.ts</code>:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  
    router<span class="token punctuation">,</span>  
    store<span class="token punctuation">,</span>  
    <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>npm i VueI18n</code></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span>
<span class="token comment">// 新模块</span>
<span class="token keyword">import</span> i18n <span class="token keyword">from</span> <span class="token string">'./i18n'</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    
    router<span class="token punctuation">,</span>     
    store<span class="token punctuation">,</span>     
    i18n<span class="token punctuation">,</span> <span class="token comment">// 新模块    </span>
    <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>但仅仅这样，还不够。你需要动 <code>src/vue-shim.d.ts</code>：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 声明全局方法</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'vue/types/vue'</span> <span class="token punctuation">{</span>  
    <span class="token keyword">interface</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>        
        <span class="token keyword">readonly</span> $i18n<span class="token punctuation">:</span> VueI18Next<span class="token punctuation">;</span>        
        $t<span class="token punctuation">:</span> TranslationFunction<span class="token punctuation">;</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>之后使用 <code>this.$i18n()</code>的话就不会报错了。</p> <h5 id="axios-使用与封装"><a href="#axios-使用与封装" aria-hidden="true" class="header-anchor">#</a> Axios 使用与封装</h5> <ul><li>新建文件 <code>request.ts</code></li></ul> <p>文件目录:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-api    
	- main.ts   // 实际调用
-utils    
	- request.ts  // 接口封装
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><code>request.ts</code>文件解析</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span><span class="token punctuation">;</span>
<span class="token comment">// 这里可根据具体使用的UI组件库进行替换</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AxiosResponse<span class="token punctuation">,</span> AxiosRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>

 <span class="token comment">/* baseURL 按实际项目来定义 */</span>
 <span class="token keyword">const</span> baseURL <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_URL</span><span class="token punctuation">;</span>
 <span class="token comment">/* 创建axios实例 */</span>
 <span class="token keyword">const</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    
     baseURL<span class="token punctuation">,</span>    
     timeout<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 请求超时时间    </span>
     maxContentLength<span class="token punctuation">:</span> <span class="token number">4000</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">:</span> AxiosRequestConfig</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    
	<span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    
	<span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>    
	<span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">:</span> AxiosResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        
		<span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            
			Toast<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">'请求错误！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            
			<span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>        
		<span class="token punctuation">}</span>   
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        
		<span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> service<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>为了方便，我们还需要定义一套固定的 axios 返回的格式，新建 <code>ajax.ts</code>：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">AjaxResponse</span> <span class="token punctuation">{</span>    
    code<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>    
    data<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>    
    message<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>main.ts</code>接口调用：</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// api/main.ts</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'../utils/request'</span><span class="token punctuation">;</span>
<span class="token comment">// get</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getSomeThings</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">:</span><span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
	<span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        
		url<span class="token punctuation">:</span> <span class="token string">'/api/getSomethings'</span><span class="token punctuation">,</span>   
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// post</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">postSomeThings</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">:</span><span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
	<span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        
		url<span class="token punctuation">:</span> <span class="token string">'/api/postSomethings'</span><span class="token punctuation">,</span>        
		methods<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>        
		data<span class="token punctuation">:</span> params   
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="编写一个组件"><a href="#编写一个组件" aria-hidden="true" class="header-anchor">#</a> 编写一个组件</h5> <p>为了减少时间，我们来替换掉 <code>src/components/HelloWorld.vue</code>，做一个博客帖子组件：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;blogpost&quot;</span><span class="token operator">&gt;</span>        
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> post<span class="token punctuation">.</span>title <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>        
		<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> post<span class="token punctuation">.</span>body <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>        
		<span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;meta&quot;</span><span class="token operator">&gt;</span>Written by <span class="token punctuation">{</span><span class="token punctuation">{</span> post<span class="token punctuation">.</span>author <span class="token punctuation">}</span><span class="token punctuation">}</span> on <span class="token punctuation">{</span><span class="token punctuation">{</span> date <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>    
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Vue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>
	<span class="token comment">// 在这里对数据进行类型约束</span>
	<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Post</span> <span class="token punctuation">{</span>    
        title<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>    
        body<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>    
        author<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>    
        datePosted<span class="token punctuation">:</span> Date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	@Componentexport <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>    
		@<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">private</span> post<span class="token operator">!</span><span class="token punctuation">:</span> Post<span class="token punctuation">;</span>
    	<span class="token keyword">get</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       	   <span class="token keyword">return</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>post<span class="token punctuation">.</span>datePosted<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>post<span class="token punctuation">.</span>datePosted<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>post<span class="token punctuation">.</span>datePosted<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>    
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
    h2 <span class="token punctuation">{</span>  
        text<span class="token operator">-</span>decoration<span class="token punctuation">:</span> underline<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	p<span class="token punctuation">.</span>meta <span class="token punctuation">{</span>  
        font<span class="token operator">-</span>style<span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>然后在 <code>Home.vue</code>中使用:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;home&quot;</span> <span class="token operator">&gt;</span> 
        <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">&quot;Vue logo&quot;</span> src <span class="token operator">=</span> <span class="token string">&quot;../assets/logo.png&quot;</span> <span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>HelloWorld v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span> <span class="token string">&quot;blogPost in blogPosts&quot;</span> <span class="token punctuation">:</span>post <span class="token operator">=</span> <span class="token string">&quot;blogPost&quot;</span> <span class="token punctuation">:</span>key <span class="token operator">=</span> <span class="token string">&quot;blogPost.title&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span> script lang <span class="token operator">=</span> <span class="token string">&quot;ts&quot;</span> <span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> HelloWorld<span class="token punctuation">,</span> <span class="token punctuation">{</span> Post <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/components/HelloWorld.vue'</span><span class="token punctuation">;</span> 
<span class="token comment">// @ is an alias to /src</span>
@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span> components<span class="token punctuation">:</span> <span class="token punctuation">{</span> HelloWorld<span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span> 
	<span class="token keyword">private</span> blogPosts<span class="token punctuation">:</span> Post<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> 
            title<span class="token punctuation">:</span> <span class="token string">'My first blogpost ever!'</span><span class="token punctuation">,</span> 
            body<span class="token punctuation">:</span> <span class="token string">'Lorem ipsum dolor sit amet.'</span><span class="token punctuation">,</span> 
            author<span class="token punctuation">:</span> <span class="token string">'Elke'</span><span class="token punctuation">,</span> 
            datePosted<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
		<span class="token punctuation">{</span> 
            title<span class="token punctuation">:</span> <span class="token string">'Look I am blogging!'</span><span class="token punctuation">,</span> 
            body<span class="token punctuation">:</span> <span class="token string">'Hurray for me, this is my second post!'</span><span class="token punctuation">,</span>
            author<span class="token punctuation">:</span> <span class="token string">'Elke'</span><span class="token punctuation">,</span> 
            datePosted<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
		<span class="token punctuation">{</span> 
            title<span class="token punctuation">:</span> <span class="token string">'Another one?!'</span><span class="token punctuation">,</span> 
            body<span class="token punctuation">:</span> <span class="token string">'Another one!'</span><span class="token punctuation">,</span> 
            author<span class="token punctuation">:</span> <span class="token string">'Elke'</span><span class="token punctuation">,</span> 
            datePosted<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="参考"><a href="#参考" aria-hidden="true" class="header-anchor">#</a> 参考</h3> <p>1.<a href="https://mp.weixin.qq.com/s/d8DHLicNPEwY2Ly6x6mEsA" target="_blank" rel="noopener noreferrer">Vue 3.0前的 TypeScript 最佳入门实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>2.<a href="https://cn.vuejs.org/v2/guide/typescript.html" target="_blank" rel="noopener noreferrer">Vue的TS支持<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/BaoTao1997/edit/master/docs/blog/js-typescript.md" target="_blank" rel="noopener noreferrer">帮助我完善这篇内容🙏</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/js-eventloop.html" class="prev">
          JS事件循环
        </a></span> <span class="next"><a href="/blog/operation-git.html">
          Git常规操作与Linux命令
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f225858c.js" defer></script><script src="/assets/js/2.672550d7.js" defer></script><script src="/assets/js/32.bfb29c32.js" defer></script>
  </body>
</html>
